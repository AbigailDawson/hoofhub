<%- include('../partials/header') %>

<div class="container mt-5">

<div class="card title-card">
    <h3 class="section-title text-center"><a href='/barns/<%= barn.id %>'><%= barn.name %></a></h3>

    <small class="card-text text-center">
        <%= barn.address[0].streetAddress %><br>
        <%= barn.address[0].city %>, <%= barn.address[0].state %> <%= barn.address[0].zip %>
    </small>
    
    <% if (barn.contact.length) { %>
        <small class="card-text mt-3 text-center barn-contacts-sm">
            <strong><%= barn.contact[0].role %>: </strong>
            <%= barn.contact[0].contactName %> | <%= barn.contact[0].phone %><br>
        </small>
        <% }  %>
    
</div>

<a href="/barns/<%= barn.id %>/chores">Chores</a>

<div class="row mt-3 g-2 justify-content-center">
    <div class="col-auto">
        <a class="btn" href='/barns/<%= barn.id %>/horses?sort=name'>Sort by Name</a>
    </div>
    <div class="col-auto">
        <a class="btn" href='/barns/<%= barn.id %>/horses?sort=age'>Sort by Age</a>
    </div>
    <div class="col-auto">
        <a class="btn" href='/horses/new'>Add a Horse</a>
    </div>
</div>
    
<div class="row mt-5">
    <% barn.horses.forEach((horse) => { %>

        <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-4">
            <div class="card rounded-2 p-3 bg-white shadow horse-detail-card">
                <h2 class="mb-2"><%= horse.name %> </h2>
                <p class="mb-2"><%= horse.age %> year old <%= horse.color %> <%= horse.sex %> </p>
                <a href="/horses/<%= horse.id %>" class="btn mt-1 btn-md w-100 horses-btn">Horse Details</a>
     
            </div>
        </div>
    <% }) %>
</div>

<%- include('../partials/footer') %>
