<%- include('../partials/header') %>
  
<div class="container mt-5 pb-5 d-flex flex-column align-items-center">

    <h2 class="mb-4 fs-2">My Barns</h2>

    <div class="row g-2 justify-content-center">
        <% if (barns.length) { %>
            <div class="col-auto">
                <a class="btn" href='/barns/new'>Add a Barn</a>
            </div>
            <% } else { %>
                <div class="row g-2 justify-content-center">
                    <div class="col-auto">
                        <p>No barns have been added yet!</p>
                    </div>
                </div>
                <div class="row g-2 justify-content-center">
                    <div class="col-auto">
                        <a class="btn" href='/barns/new'>Add a Barn</a>
                    </div>
                </div>
                <% } %>
    </div>

    <div class="row mt-4 d-flex flex-column">

        <% barns.forEach((barn) => { %>

            <div class="col-12 mb-4">
                <div class="card border rounded-2 p-2 ps-5 pe-5 p-sm-3 ps-sm-4 pe-sm-4 bg-white shadow barn-card">

                    <!-- SM SCREEN: MINIMALIST CARDS -->

                    <div class="d-sm-none ">
                        <div class="card-body d-flex flex-column justify-content-center" style="overflow: hidden">

                            <h5 class="barn-card-title text-center section-title"><a href='/barns/<%= barn.id %>'><%= barn.name %></a></h5>

                            <small class="card-text text-center">
                                <%= barn.address[0].streetAddress %><br>
                                <%= barn.address[0].city %>, <%= barn.address[0].state %> <%= barn.address[0].zip %>
                            </small>

                            <small class="mt-3 text-center barn-contact">
                                <%= barn.contact[0].role %>:<br>
                                 <%= barn.contact[0].contactName %> | <%= barn.contact[0].phone %>
                            </small>
                            <button type="button" class="btn mt-1 edit-btn-white" style="background-color: white">
                                <a href="/barns/<%= barn.id %>/edit"><i class="bi bi-pencil-square edit-icon-white" style="background-color: white"></i></a>
                            </button>
                            <a href="/barns/<%= barn.id %>" class="btn mt-2 btn-md w-100">Barn Details</a>

                        </div>
                    </div>

                    <!-- LG SCREEN: BIG CARDS -->

                    <div class="row g-0 d-sm-flex d-none d-sm-block">

                            <div class="col-sm-6 col-md-7">
                                
                                <h5 class="barn-card-title section-title">

                                    <%= barn.name %>
                                    <button type="button" class="btn edit-btn-white" style="background-color: white">
                                        <a href="/barns/<%= barn.id %>/edit"><i class="bi bi-pencil-square edit-icon-white" style="background-color: white"></i></a>
                                    </button>

                                </h5>
                                
                                <p class="card-subtitle fs-6 mt-2"> 
                                    <%= barn.address[0].streetAddress %><br>
                                    <%= barn.address[0].city %>, <%= barn.address[0].state %> <%= barn.address[0].zip %>
                                </p>
                            </div>
                            
                            <div class="col-sm-6 col-md-5 barn-contact align-self-end">
                                <small> 
                                    <strong><%= barn.contact[0].role %>: </strong>
                                <%= barn.contact[0].contactName %> | <%= barn.contact[0].phone %><br>
                                </small>
                            </div>


                        <div class="col-md-12 horse-col">
                            <a href="/barns/<%= barn.id %>" class="btn mt-3 btn-md w-100">Barn Details</a>
                        </div>

                    </div>
                </div>
            </div>
        <% }) %>
    </div>
</div>
  
<%- include('../partials/footer') %>
